{% extends 'base.html' %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='estilos/agenda.css') }}">
{% endblock %}

{% block content %}

<div class="card">
  <h1>ğŸŒŠ PrevisÃ£o da Praia de Intermares</h1>

  {% if previsao %}
    <div class="card">
      <p><strong>Altura da MarÃ©:</strong> {{ previsao.waveHeight.noaa }} m</p>
      <p><strong>Temperatura da Ãgua:</strong> {{ previsao.waterTemperature.noaa }} Â°C</p>
      <p><strong>Vento:</strong> {{ previsao.windSpeed.noaa }} m/s ({{ previsao.windDirection.noaa }}Â°)</p>
    </div>
  {% else %}
    <p>âŒ NÃ£o foi possÃ­vel carregar a previsÃ£o agora.</p> 
  {% endif %}
</div>

<div class="container" role="main" aria-labelledby="agendar-title">
    <h1 id="agendar-title">Agendamento</h1>
    <h2>Aulas de surf â€” Praia de Intermares</h2>

    <p class="lead">Preencha seus dados, escolha a data e um horÃ¡rio disponÃ­vel. Caso o horÃ¡rio esteja indisponÃ­vel, tente outro horÃ¡rio.</p>

    {# mostra mensagens de erro/sucesso (flash) #}
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class="flashes">
          {% for category, msg in messages %}
            <li class="flash {{ category }}">{{ msg }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

  <form action="{{ url_for('main.agenda') }}" method="post" class="form" autocomplete="off">
      <label for="nome">Seu nome</label>
      <input id="nome" name="nome" type="text" placeholder="Nome completo" required>

      <label for="telefone">Telefone</label>
      <input id="telefone" name="telefone" type="text" placeholder="(xx) 9xxxx-xxxx" required>

      <label for="data">Escolha a data</label>
      <input id="data" name="data" type="date" {% if min_date %} min="{{ min_date }}" {% endif %} required>

      <fieldset class="times" aria-label="HorÃ¡rios disponÃ­veis">
          <h2>HorÃ¡rios disponÃ­veis</h2>

          <div class="slots">
              {% for h in horarios %}
                  <input id="slot-{{ h|replace(':','-') }}" name="horario" type="radio" value="{{ h }}" {% if loop.first %}required{% endif %}>
                  <label for="slot-{{ h|replace(':','-') }}" class="slot">{{ h }}</label>
              {% endfor %}

          </div>
      </fieldset>

      <div class="actions">
          <button type="submit" class="btn">Agendar</button>
          <button type="reset" class="btn btn-ghost">Limpar</button>
      </div>

      <p class="foot">Aulas em Intermares â€” disponibilidade sujeita Ã  confirmaÃ§Ã£o.</p>
  </form>


</div>
{% endblock %}